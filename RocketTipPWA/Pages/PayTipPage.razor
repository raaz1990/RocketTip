@page "/paytip"
@inject NavigationManager NavManager
<PageTitle>PayTipPage</PageTitle>

<style>
    .paytip-page {
        padding: 20px;
    }

    .header {
        margin-bottom: 30px;
    }

    .logo {
        max-height: 200px;
    }

    .tip-section {
        display: flex;
        justify-content: space-between;
        margin-bottom: 30px;
    }

    .tip-labels {
        display: flex;
        flex-direction: column;
    }

    .tip-text {
        font-size: 18px;
        font-weight: bold;
    }

    .tip-input {
        display: flex;
        justify-content: flex-end;
    }

    .tip-amount {
        font-size: 18px;
        padding: 5px;
        width: 200px;
    }

    .payment-icons, .card-icons {
        display: flex;
        justify-content: center;
        margin-bottom: 30px;
    }

    .payment-icon, .card-icon {
        height: 80px;
        margin: 0 10px;
    }

    .error-message {
        color: red;
        font-size: 14px;
        margin-top: 10px;
    }

    .pay-button {
        background-color: #F83758;
        color: white;
        font-weight: bold;
        border: none;
        border-radius: 5px;
        height: 50px;
        width: 100%;
        cursor: pointer;
        margin-top: 20px;
    }

        .pay-button:disabled {
            background-color: #d3d3d3;
            cursor: not-allowed;
        }
</style>

<main class="paytip-page">
    <div class="content">
        <!-- Header -->
        <div class="header text-center">
            <img src="images/rockettipslogowithroce.png" alt="Rocket Tips Logo" class="logo" />
        </div>

        <!-- Total Bill Section -->
        <div class="tip-section">
            <div class="tip-labels">
                <label class="tip-text">Your Tip</label>
                <label class="tip-text">(including fee)</label>
            </div>
            <div class="tip-input">
                <input type="number" class="tip-amount" placeholder="Enter tip Amount" @bind="tipAmount" />
            </div>
        </div>

        <!-- Error Message for Invalid Tip Amount -->
        @if (!isValidAmount)
        {
            <p class="error-message">Please enter a valid tip amount greater than 0.</p>
        }

        <!-- Custom Tip Section -->
        <div class="payment-icons text-center">
            <img src="images/ipay_icon.png" alt="iPay" class="payment-icon" />
            <img src="images/gpay_icon.png" alt="Google Pay" class="payment-icon" />
        </div>

        <div class="card-icons text-center">
            <img src="images/card_1.png" alt="Card 1" class="card-icon" />
            <img src="images/card_2.png" alt="Card 2" class="card-icon" />
        </div>

        <!-- Pay Button -->
        <button class="pay-button" @onclick="HandlePayment" disabled="@(!isValidAmount)">Pay</button>
    </div>

    <!-- Bottom Tab Bar -->
    <BottomTabBar />
</main>

@code {
    private decimal tipAmount { get; set; }
    private bool isValidAmount => tipAmount > 0;

    private void HandlePayment()
    {
        if (isValidAmount)
        {
            // Proceed with payment logic or navigation
            // For example: Navigate to payment confirmation page
            NavManager.NavigateTo("/paymentConfirmation");
        }
    }
}
